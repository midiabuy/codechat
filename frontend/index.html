<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body>
  <h1>Websocket</h1>

  <form action="" id="instance-form">
    <label for="input-instance">Instance Name</label>
    <input type="text" id="input-instance" />
    <button type="submit">Create Instance</button>
  </form>

  <div>
    <img src="" alt="imagem do qrcode" id="qrcode" />
  </div>

  <div>
    <button id="chat-button">Ir para conversas</button>
  </div>

  <script src="./js/index.js"></script>

  <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
  <script>
    const socket = io("ws://127.0.0.1:8084", {
      transports: ["websocket"],
      auth: {
        serverOffset: 0,
      },
    });
    // let socket = new WebSocket("ws://127.0.0.1:3001");
    console.log("Attempting Connection...");

    socket.on("connect", () => {
      console.log("connected");
    });

    // socket.on("onmessage", (message, offset) => {
    //   console.log(message);
    // });

    socket.on("oncontacts", (contact) => {
      console.log(contact);
    });

    socket.on("connection_error", (e) => {
      console.log(e);
    });

    socket.on("disconnect", (e) => {
      console.log(e);
      socket.connect();
    });

    // socket.onopen = () => {
    //     console.log("Successfully Connected");
    // };

    // socket.onmessage = event => {
    //     console.log("Received message:", event.data);
    //     displayMessage(event.data);
    // };

    // socket.onclose = event => {
    //     console.log("Socket Closed Connection: ", event);
    //     socket.send("Client Closed!");
    // };

    // socket.onerror = error => {
    //     console.log("Socket Error: ", error);
    // };

    // function displayMessage(message) {
    //     console.log(message);
    // };
  </script>
</body>

</html>